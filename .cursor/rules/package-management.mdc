---
description: パッケージ管理（Bun）ルールと禁止事項
globs: "**/*"
alwaysApply: true
---

# パッケージ管理（Bun）

## 原則
- 依存の追加・更新は必ず `bun` を用いる。`package.json` の手動編集は禁止。
  - 追加: `bun add <pkg>`（開発依存は `bun add -d <pkg>`）
  - 削除: `bun remove <pkg>`

## 実行場所（モノレポ）
- 対象パッケージのディレクトリで実行する（例: `apps/server-node` 配下で追加）。

## バージョン指定
- 原則不要。必要時のみ `@<version>` を付与し、理由をコメント等で共有する。

## 禁止事項
- モデルの知識カットオフ日を根拠にしたバージョン固定・手動記載を禁止。
- lockファイル（`bun.lock`）と解決戦略を信頼し、手動での整合調整を行わない。

## コマンド例
```bash
cd apps/server-node
bun add zod

cd packages/contracts
bun add -d tsup
```

## 目的
- 一貫したロックファイル管理（`bun.lock`）と解決の再現性を担保する。
- 手動編集による不整合（古い・不正確なバージョン、ワークスペースずれ）を防止する。

